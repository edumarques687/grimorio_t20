{% extends './spell_base.html' %}
{% block content %}

<div class="container-fluid">
    <div class="row">
        <h1 style="text-align:center">
            Magias: {{ spells.count }} magia{{ spells.count|pluralize }}
        </h1>
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-6">
                    <form action="{% url 'spell:spells_page' %}">
                        <label>Tipo: </label><br>
                        <input type="checkbox" id="Arcana" name="type1" value="AR">
                        <label for="Arcana">Arcana</label>
                        <input type="checkbox" id="Divina" name="type2" value="DI">
                        <label for="Divina">Divina</label>
                        <input type="checkbox" id="Universal" name="type3" value="UN">
                        <label for="Universal">Universal</label>
                        <br>

                        <label>Escola: </label><br>
                        <input type="checkbox" id="AB" name="school1" value="AB">
                        <label for="AB">Abjuração</label>
                        <input type="checkbox" id="AD" name="school2" value="AD">
                        <label for="AD">Advinhação</label>
                        <input type="checkbox" id="CO" name="school3" value="CO">
                        <label for="CO">Convocação</label>
                        <input type="checkbox" id="EN" name="school4" value="EN">
                        <label for="EN">Encantamento</label>
                        <input type="checkbox" id="EV" name="school5" value="EV">
                        <label for="EV">Evocação</label>
                        <input type="checkbox" id="IL" name="school6" value="IL">
                        <label for="IL">Ilusão</label>
                        <input type="checkbox" id="NE" name="school7" value="NE">
                        <label for="NE">Necromancia</label>
                        <input type="checkbox" id="TR" name="school8" value="TR">
                        <label for="AB">Transmutação</label>
                        <br>

                        <label for="execution">Execução: </label>
                        <input type="text" id="execution" name="execution"><br>
                        <label for="duration">Duração: </label>
                        <input type="text" id="duration" name="duration"><br>
                        <label for="target_area_effect">Alvo, Área ou Efeito: </label>
                        <input type="text" id="target_area_effect" name="target_area_effect"><br>
                        <label for="resistance">Resistência: </label>
                        <input type="text" id="resistance" name="resistance"><br>

                        <label>Origem: </label>
                        <select name="book_magazine">
                            <option value="" selected="selected">Todas</option>
                            {% for origin in origins %}
                            <option value="{{origin}}">{{origin}}</option>
                            {% endfor %}
                        </select><br>

                        <input type="submit" value="Filtrar magias" class="btn btn-primary">
                    </form>
                </div>
                <div class="col-md-6">
                    <form action="{% url 'grimoire:add_spells' %}" method="POST">
                        {% csrf_token %}
                        {% if user.is_authenticated %}
                            {% if user_grimoires %}
                                <h2>Selecione seu grimório: </h2>
                                <select name="grimoire_id">
                                    {% for grimoire in user_grimoires%}
                                    <option value="{{grimoire.id}}">{{grimoire.name}}</option>
                                    {% endfor %}
                                </select>


                                <input type="submit" value="Adicionar magias" class="btn btn-primary">
                                {% endif %}
                        {% endif %}
                        <br>
                        {% for c in circles %}
                        <h2>{{ c }}º círculo: </h2>
                        {% for spell in spells %}
                        {% if spell.circle == c %}

                        <a href="{% url 'spell:spell_details' spell.id %}">
                            <h4>
                                {% if user.is_authenticated %}
                                    {% if user_grimoires %}
                                    <input type="checkbox" name="spell{{spell.id}}" value={{spell.id}}>
                                    {% endif %}
                                {% endif %}
                                {{ spell.name }}
                            </h4>
                        </a>
                        <p>{{ spell.short_description }}</p>
                        {% endif %}
                        {% endfor %}
                        {% endfor %}

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}